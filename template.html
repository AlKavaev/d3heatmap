<!DOCTYPE html>
<meta charset="utf-8">
<style>

.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node {
  font: 10px sans-serif;
}

.link {
  fill: none;
  stroke: #AAA;
  stroke-width: 1px;
  shape-rendering: crispEdges;
}

</style>
<body>
  <svg id="cluster"></svg>
<script src="http://d3js.org/d3.v3.js"></script>
<script>
var id = 'cluster';
var rotated = false;
var width = 250,
    height = 900;
var zoom = 1;

var x = d3.scale.linear();
var y = d3.scale.linear()
  .domain([0, height])
  .range([0, height*zoom]);

var cluster = d3.layout.cluster()
    .separation(function(a, b) { return 1; })
    .size([rotated ? width : height, (rotated ? height : width) - 160]);

var transform = "translate(40,0)";
if (rotated) {
  transform = "rotate(90," + width/2 + "," + width/2 + ") " + transform;
}

var zoomBehavior = d3.behavior.zoom().on('zoom', draw);
if (rotated)
  zoomBehavior.x(y);
else
  zoomBehavior.y(y);

var svg = d3.select("svg#" + id)
    .attr("width", width)
    .attr("height", height)
    .call(zoomBehavior)
  .append("g")
    .attr("transform", transform);

var nodes = cluster.nodes(data()),
    links = cluster.links(nodes);

function draw() {
  function elbow(d, i) {
    return x(d.source.y) + "," + y(d.source.x) + " " +
        x(d.source.y) + "," + y(d.target.x) + " " +
        x(d.target.y) + "," + y(d.target.x);
  }

  var link = svg.selectAll(".link")
      .data(links)
      .attr("points", elbow)
    .enter().append("polyline")
      .attr("class", "link")
      .attr("points", elbow);

  var node = svg.selectAll(".node")
      .data(nodes)
      .attr("transform", function(d) { return "translate(" + x(d.y) + "," + y(d.x) + ")"; })
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + x(d.y) + "," + y(d.x) + ")"; });

  var leafNode = node.filter(function(d, i){ return !d.children; })
      .append("text")
      .attr("dx", 3)
      .attr("dy", 3)
      .style("text-anchor", function(d) { return d.children ? "end" : "start"; })
      .text(function(d) { return d.name; });

  //d3.select(self.frameElement).style("height", height + "px");
}
draw();

function data() {
  return {{data}};
}

</script>